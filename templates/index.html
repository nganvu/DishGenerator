<!DOCTYPE html>
<html lang="en">
<style>
table {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    width: 100%;
}

td, th {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
}

tr:nth-child(even) {
    background-color: #dddddd;
}

</style>
<head>
    <meta charset="UTF-8">
    <title>Dish Generator</title>
</head>
<body>
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <ul>
            {% for message in messages %}
                <li>{{ message[1] }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endwith %}

<form action="" method="post">
    {{ form.csrf }}
    
    <table class="input" style="width:100%">
    <tr>
        <th>Label</th>
        <th>Value</th>
    </tr>

    <tr>
        <td>{{ form.name.label }}</td>
        <td>{{ form.name() }}</td>
    </tr>

    <tr>
        <td>{{ form.ingredients.label }}</td>
        <td>{{ form.ingredients() }}</td>
    </tr>

    <tr>
        <td>{{ form.occasions.label }}</td>
        <td><!-- {{ form.occasions()}} -->
            <select class="input" name="occasions">
                <option value="anniversary">anniversary</option>
                <option value="back to school">back to school</option>
                <option value="backyard bbq">backyard bbq</option>
                <option value="bastille day">bastille day</option>
                <option value="birthday">birthday</option>
                <option value="camping">camping</option>
                <option value="christmas">christmas</option>
                <option value="christmas eve">christmas eve</option>
                <option value="cinco de mayo">cinco de mayo</option>
                <option value="cocktail party">cocktail party</option>
                <option value="diwali">diwali</option>
                <option value="easter">easter</option>
                <option value="father's day">father's day/option>
                <option value="fourth of july">fourth of july</option>
                <option value="friendsgiving">friendsgiving</option>
                <option value="graduation">graduation</option>
                <option value="hanukkah">hanukkah</option>
                <option value="kentucky derby">kentucky derby</option>
                <option value="kwanzaa">kwanzaa</option>
                <option value="labor day">labor day</option>
                <option value="lunar new year">lunar new year</option>
                <option value="mardi gras">mardi gras</option>
                <option value="mother's day">mother's day</option>
                <option value="new year's day">new year's day</option>
                <option value="oktoberfest">oktoberfest</option>
                <option value="oscars">oscars</option>
                <option value="parade">parade</option>
                <option value="party">party</option>
                <option value="passover">passover</option>
                <option value="persian new year">persian new year</option>
                <option value="picnic">picnic</option>
                <option value="poker/game night">poker/game night</option>
                <option value="potluck">potluck</option>
                <option value="purim">purim</option>
                <option value="ramadan">ramadan</option>
                <option value="rosh hashanah/yom kippur">rosh hashanah/yom kippur</option>
                <option value="shavuot">shavuot</option>
                <option value="spring">spring</option>
                <option value="st. patrick's day">st. patrick's day</option>
                <option value="sukkot">sukkot</option>
                <option value="summer">summer</option>
                <option value="tailgating">tailgating</option>
                <option value="thanksgiving">thanksgiving</option>
                <option value="valentine's day">valentine's day</option>
                <option value="wedding">wedding</option>
                <option value="winter">winter</option>
            </select>
        </td>
    </tr>

    <tr>
        <td>Meal of the day</td>
        <td>
            <table class="input" style="width:100%">
            <tr>
                <td>{{ form.breakfast.label }}{{ form.breakfast() }}</td>
                <td>{{ form.brunch.label }}{{ form.brunch() }}</td>
                <td>{{ form.lunch.label }}{{ form.lunch() }}</td>
                <td>{{ form.dinner.label }}{{ form.dinner() }}</td>
                <td>{{ form.dessert.label }}{{ form.dessert() }}</td>
            </tr>
            </table>
        </td>
    </tr>

    <tr>
        <td>Nutrition</td>
        <td>
            <table class="input" style="width:100%">

            <tr>
                <td><label for="calories">Calories (cal)</label>
                <div class="container">
                <input type="range" name="calories" min="0" max="2500" value="1500" step="100" list="tickmarks" id="rangeInput" oninput="output.value = rangeInput.value">
                <datalist id="tickmarks">
                <option>0</option>
                <option>500</option>
                <option>1000</option>
                <option>1500</option>
                <option>2000</option>
                <option>2500</option>
                </datalist>
                <output id="output" for="rangeInput">1500</output>
                </div>
                </td>

                <td><label for="calories">Protein (gram)</label>
                <div class="container">
                <input type="range" name="protein" min="0" max="2500" value="1500" step="100" list="tickmarks" id="rangeInput" oninput="output.value = rangeInput.value">
                <datalist id="tickmarks">
                <option>0</option>
                <option>500</option>
                <option>1000</option>
                <option>1500</option>
                <option>2000</option>
                <option>2500</option>
                </datalist>
                <output id="output" for="rangeInput">1500</output>
                </div>
                </td>

                <td><label for="calories">Fat (gram)</label>
                <div class="container">
                <input type="range" name="fat" min="0" max="2500" value="1500" step="100" list="tickmarks" id="rangeInput" oninput="output.value = rangeInput.value">
                <datalist id="tickmarks">
                <option>0</option>
                <option>500</option>
                <option>1000</option>
                <option>1500</option>
                <option>2000</option>
                <option>2500</option>
                </datalist>
                <output id="output" for="rangeInput">1500</output>
                </div>
                </td>
            </tr>
            
            </table>
            
        </td>
    </tr>

    <tr>
        <td>Show me dish ideas!</td>
        <td>{{ form.submit() }}</td>
    </tr>

    </table>

</form>

</br>
<div>
SQL query:
{% if query %}
    {{ query }}
{% endif %}
</div>
</br>

<table style="width:100%">
    {% if result %}
    <tr>
        <th>Title</th>
        <th>Recipe</th>
        <th>Calories (cal)</th>
        <th>Protein (gram)</th>
        <th>Fat (gram)</th>
    </tr>
    {% for row in result %}
    <tr>
        <td> {{ row.title }}</td>
        <td>
            <a href={{ row.link.link }}>{{ row.link.name }}</a>
            </br> 
            {{ row.link.description }}
        </td>
        <td> {{ row.calories }}</td>
    </tr>
    {% endfor %}
    {% endif %}
</table>
</body>
</html>
